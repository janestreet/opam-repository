--- a/compiler/lib/stdlib.ml
+++ b/compiler/lib/stdlib.ml
@@ -156,7 +156,11 @@
         :: f5
         :: (if ctr > max_non_tailcall then slow_map ~f tl else count_map ~f tl (ctr + 1))
 
-  let map l ~f = count_map ~f l 0
+  let[@tail_mod_cons] rec map l ~f =
+    match l with
+    | [] -> []
+    | x :: tl -> f x :: (map [@tailcall]) tl ~f
+  ;;
 
   let rec take' acc n l =
     if n = 0
